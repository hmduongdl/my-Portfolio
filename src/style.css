@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
    scrollbar-width: none;
    /* Firefox */
    /* Scroll stops handled by JavaScript debouncing + 20/80 rule */
  }

  /* Chrome, Safari, Opera */
  html::-webkit-scrollbar {
    display: none;
  }

  body {
    @apply font-sans;
    -ms-overflow-style: none;
    /* IE and Edge */
  }
}

@layer components {
  .section {
    @apply flex items-center justify-center;
    @apply px-4 py-12 sm:px-6 sm:py-16 md:py-20 lg:px-8;
    min-height: 100vh;
  }

  @media (max-width: 640px) {
    .section {
      min-height: auto;
      padding-top: 4rem;
      padding-bottom: 4rem;
    }
  }

  .section-compact {
    @apply flex items-center justify-center;
    min-height: auto;
    padding-top: 3rem;
    padding-bottom: 2rem;
  }

  @media (max-width: 640px) {
    .section-compact {
      padding-top: 2rem;
      padding-bottom: 1.5rem;
    }
  }

  .container-custom {
    @apply max-w-5xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .link-hover {
    @apply relative after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-0 after:bg-gray-900 after:transition-all after:duration-300 hover:after:w-full;
  }

  .tech-tag {
    @apply font-mono text-xs px-3 py-1 bg-clean-bg-alt border border-gray-200 rounded-full inline-block;
  }

  .project-card {
    @apply border border-gray-200 rounded-lg p-6 transition-all duration-300;
    @apply hover:shadow-xl hover:-translate-y-2;
  }

  /* Project card internals */
  .project-card {
    display: flex;
    flex-direction: column;
    background-color: white;
  }

  .project-image {
    transition: transform 300ms ease, opacity 300ms ease;
  }

  .project-card:hover .project-image {
    transform: scale(1.03);
    opacity: 0.98;
  }

  .project-card h3 {
    @apply text-gray-900;
  }

  .project-card p {
    @apply text-gray-600;
  }

  .project-card a {
    text-decoration: none;
  }

  /* Projects grid: responsive columns with sensible gaps */
  .projects-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  @media (min-width: 640px) {
    .projects-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (min-width: 1024px) {
    .projects-grid {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  .experience-card {
    @apply border-l-4 border-gray-300 rounded-lg bg-white/70 transition-all duration-200;
    @apply px-5 py-5 md:px-7 md:py-6;
  }

  .experience-card:hover {
    @apply border-clean-accent bg-white shadow-md;
    transform: translateY(-2px);
  }


  .gradient-text {
    @apply bg-gradient-to-r from-deep-accent to-deep-accent-alt bg-clip-text text-transparent;
  }

  /* Tech Stack Card Styles - Light Theme */
  .tech-card-glow {
    @apply bg-white border border-gray-200 rounded-lg flex items-center transition-all duration-300;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .tech-card-glow:hover {
    @apply border-green-500 bg-green-50;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transform: translateY(-2px);
  }

  .progress-ring__circle {
    transition: stroke-dashoffset 1500ms ease-in-out;
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  }

  .lang-bar-fill {
    transition: width 1500ms cubic-bezier(.2, .8, .2, 1);
    width: 0%;
  }

  /* Navigation active state */
  .nav-link {
    transition: color 300ms ease-in-out;
  }

  /* About split animation */
  #about-left,
  #about-right {
    transition: transform 800ms cubic-bezier(0.4, 0, 0.2, 1), opacity 800ms ease-in-out;
  }

  /* primary split: push columns fully out of viewport (vw-based) */
  #about-left.about-split {
    transform: translateX(calc(-100vw - 2rem));
    opacity: 0.95;
  }

  #about-right.about-split {
    transform: translateX(calc(100vw + 2rem));
    opacity: 0.95;
  }

  /* secondary split: push further but not excessively (ensure quick return) */
  #about-left.about-split-2 {
    transform: translateX(calc(-150vw - 2rem));
  }

  #about-right.about-split-2 {
    transform: translateX(calc(150vw + 2rem));
  }

  /* After-about reveal */
  #after-about.revealed {
    opacity: 1 !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
  }

  /* About background sync */
  #about-bg {
    transition: transform 800ms cubic-bezier(0.4, 0, 0.2, 1), opacity 800ms ease-in-out, filter 800ms ease-in-out;
    transform-origin: center;
  }

  /* Layer quick-fade helper for projects/contact appearing */
  #projects-layer,
  #contact-layer {
    transition: opacity 240ms ease-in-out, transform 400ms ease-in-out;
  }

  /* Hidden continuous progress bar (beneath visible snapping bar) */
  #scroll-progress-hidden {
    /* transform based animation prevents layout thrashing */
    width: 100%;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 200ms linear;
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.08), rgba(0, 0, 0, 0.04));
    /* Performance optimizations */
    will-change: transform;
    contain: layout style paint;
  }

  /* Visible snapping bar - instant snap */
  #scroll-progress {
    width: 100%;
    transform: scaleX(0);
    transform-origin: left;
    /* Performance optimizations */
    will-change: transform;
    contain: layout style paint;
  }

  /* subtle zoom/dim when split starts */
  #about-bg.bg-split {
    transform: scale(1.08);
    opacity: 0.95;
    filter: blur(10px) saturate(0.95);
  }

  /* hide/fade when reveal pops up */
  #about-bg.bg-hidden {
    transform: scale(1.12);
    opacity: 0;
    pointer-events: none;
  }
}